% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/save_kobe_per_model2_Correct.R
\name{save_kobe_per_model2_Correct}
\alias{save_kobe_per_model2_Correct}
\title{Save individual Kobe plots per model (robust; no blank PNGs)}
\usage{
save_kobe_per_model2_Correct(
  all_models,
  scenario_names = names(all_models),
  out_dir = file.path("FIG", "per_model"),
  width = 6,
  height = 5,
  dpi = 300,
  bg = "white",
  add_id = TRUE,
  id_size = 4,
  overwrite = TRUE,
  builder = c("auto", "kobe_safe", "Original_kobe_all_in_gg", "kobe_all_in_one_gg"),
  filename_fun = NULL,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{all_models}{Named list of scenarios; each scenario is a named list of
fitted SPiCT objects (e.g. \code{list(S1 = list(S1P.SDM = rep1, S1F.SDM = rep2))}).}

\item{scenario_names}{Which scenarios to process. Default: \code{names(all_models)}.
Missing names are skipped with a warning (never stops the run).}

\item{out_dir}{Root directory. Per-scenario subdirs created automatically.
Default \code{file.path("FIG","per_model")}.}

\item{width, height}{PNG size in inches. Default \verb{6, 5}.}

\item{dpi}{PNG resolution. Default \code{300}.}

\item{bg}{Background color. Default \code{"white"}.}

\item{add_id}{Add a top-left ID (model name) inside the panel when possible.
Default \code{TRUE}.}

\item{id_size}{Size for the ID label (ggplot text size). Default \code{4}.}

\item{overwrite}{Overwrite existing files. Default \code{TRUE}.}

\item{builder}{One of \code{"auto"}, \code{"kobe_safe"}, \code{"Original_kobe_all_in_gg"},
\code{"kobe_all_in_one_gg"}. \code{"auto"} tries in that priority order. Default \code{"auto"}.}

\item{filename_fun}{Optional function \verb{(scenario, model_name) -> filename}
(without extension) to customize file names.}

\item{verbose}{Chatty progress. Default \code{TRUE}.}

\item{...}{Extra arguments forwarded to the builder (e.g., \code{rel.axes}, \code{CI}, \code{logax}).}
}
\value{
Invisibly a named list of character vectors (file paths) per scenario.
A run log is attached as \code{attr(result, "log")} with columns:
\verb{scenario, model, path, ok, note}.
}
\description{
For each requested scenario in \code{all_models}, builds a Kobe ggplot for every
fitted model and saves to \verb{FIG/per_model/<scenario>/<model>.png}.

Robustness:
\itemize{
\item Builder cascade: \code{kobe_safe()} → \code{Original_kobe_all_in_gg()} → \code{kobe_all_in_one_gg()}
→ minimal placeholder ggplot (never NULL).
\item Saver cascade: \strong{ragg::agg_png} → \strong{ggplot2::ggsave(device = "png")}
→ \strong{grDevices::png} with \code{print()}. No silent white images.
\item Filenames sanitized, dirs auto-created, errors downgraded to warnings.
}
}
\examples{
\dontrun{
res <- save_kobe_per_model(
  all_models,
  scenario_names = names(all_models),
  rel.axes = FALSE, CI = 0.95
)
attr(res, "log")
}
}
