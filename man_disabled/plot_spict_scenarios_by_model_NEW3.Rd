% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_spict_scenarios_by_model_NEW3.R
\name{plot_spict_scenarios_by_model_NEW3}
\alias{plot_spict_scenarios_by_model_NEW3}
\title{Plot SPiCT Model Scenarios with Observed Indices and Optional Confidence Intervals}
\usage{
plot_spict_scenarios_by_model_NEW3(
  models,
  production_fun = NULL,
  extract_catch_data = NULL,
  scenario_colors = NULL,
  return_patchwork = TRUE,
  lindwd = 0.8,
  show_CIs = TRUE
)
}
\arguments{
\item{models}{Named list of fitted SPiCT model objects (e.g., \code{list(S1P = ..., S1F = ..., S1S = ...)}).
All models should have the same structure for \code{$inp$timeI} and \code{$inp$obsI}.}

\item{production_fun}{Optional function to extract production curve data for each model.
It should return a data frame with columns \code{B_K}, \code{Production}, and \code{Model}.}

\item{extract_catch_data}{Optional function to extract observed and predicted catch data
for each model. It should return a data frame with at least:
\code{time}, \code{catch}, \code{lwr}, \code{upr}, \code{catch_type}, and \code{scenario}.}

\item{scenario_colors}{Optional named vector of colors for each model name. If \code{NULL},
defaults are assigned based on number of models and naming convention.}

\item{return_patchwork}{Logical; if \code{TRUE} (default) return a patchwork plot object.
If \code{FALSE}, returns a list of individual ggplot objects.}

\item{lindwd}{Numeric; line width for dashed production curve lines.}

\item{show_CIs}{Logical; if \code{TRUE} (default) include confidence intervals as shaded ribbons.}
}
\value{
If \code{return_patchwork = TRUE}, returns a patchwork object that can be printed or
saved with \code{\link[ggplot2]{ggsave}}.
If \code{return_patchwork = FALSE}, returns a named list of individual ggplot objects:
\code{$biomass}, \code{$bbmsy}, \code{$catch}, \code{$f}, \code{$ffmsy}, \code{$production}.
}
\description{
This function generates a 3x2 patchwork grid of SPiCT model outputs: biomass,
B/Bmsy, catch, fishing mortality (F), F/Fmsy, and production.
It extends the behaviour of \code{plot_spict_scenarios_by_model_NEW2()} by
adding observed indices (scaled by estimated catchability) to the biomass
panel, mimicking the plotting style of \code{\link[spict]{plotspict.biomass}}.
}
\details{
The biomass plot overlays observed index values after scaling by estimated
catchability (\eqn{q}) from the model:
\deqn{\mathrm{obsI}_{scaled} = \mathrm{obsI} / \hat{q}}
Index 1 is plotted as solid blue points, index 2 as green-filled squares
with black borders.

Colors for model lines are assigned automatically based on either a fixed palette
(if \code{length(models) == 6}) or a predefined scenario palette for up to 8 scenarios
(\code{S1}–\code{S8} × Pella/Fox/Schaefer models).
}
\examples{
\dontrun{
# Fit models first
models <- list(
  S1P = fit.elu2(inp_Pella),
  S1F = fit.elu2(inp_Fox),
  S1S = fit.elu2(inp_Schaefer)
)

# Plot all panels with observed indices on biomass plot
plot_spict_scenarios_by_model_NEW3(models)
}

}
\seealso{
\code{\link[spict]{plotspict.biomass}}, \code{\link[patchwork]{plot_layout}},
\code{\link[ggplot2]{geom_line}}, \code{\link[ggplot2]{geom_point}}
}
